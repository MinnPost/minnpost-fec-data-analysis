<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>MinnPost</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link type="text/css" rel="stylesheet" media="all" href="http://www.minnpost.com/sites/default/files/css/css_bb801627df93671ec2cf2a1c9ecf4ad2.css" />
  <link type="text/css" rel="stylesheet" media="screen" href="http://www.minnpost.com/sites/default/files/css/css_b833827e9fdb99e83e393d38c32a71fd.css" />
  <link type="text/css" rel="stylesheet" media="print" href="http://www.minnpost.com/sites/default/files/css/css_dd48b5b093a35515052acfc42613d628.css" />
  <!--[if IE]>
      <link rel="stylesheet" href="http://www.minnpost.com/sites/default/themes/derma/inc/css/ie.css?j" type="text/css">
  <![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
</head>
<body class="front logged-in page-home one-sidebar sidebar-right admin-nw admin-vertical admin-df  one-sidebar sidebar-right">


  <!-- Embed Start -->
  <div class="embeddable">
    <style type="text/css">
    	@import url('http://data.minnpost.s3.amazonaws.com/js/datatables-1.9.0/css/jquery.dataTables.css');
    </style>
    <style type="text/css">
      .js-dependent,
      .hide {
        display: none;
      }
      
      .footnote {
        font-size: .75em;
        font-style: italic;
        color: #414141;
        margin-top: 1em;
        clear: both;
      }
      
      body table.dataTable tr.odd,
      body table.dataTable tr.odd td.sorting_1 {
        background-color: #FDFDFD;
      }
      body table.dataTable tr.even,
      body table.dataTable tr.even td.sorting_1 {
        background-color: #EDEDED;
      }
      
      table td.leaning-dfl,
      body table.dataTable td.leaning-dfl,
      body table.dataTable tr td.leaning-dfl.sorting_1 {
        background-color: #809FBC;
        background-color: #A8BDD1;
      }
      table td.leaning-r,
      body table.dataTable td.leaning-r,
      body table.dataTable tr td.leaning-r.sorting_1 {
        background-color: #A75859;
        background-color: #B9797A;
      }
      .dataTables_length,
      .dataTables_filter,
      .dataTables_info,
      .dataTables_paginate {
        color: #888888;
        margin-bottom: 1em;
      }
      .dataTables_info,
      .dataTables_paginate {
        margin-top: 1em;
      }
      
      .filter-links {
        margin: 1em 0;
      }
      .filter-links label {
        display: inline;
        font-weight: bold;
      }
      .filter-links ul {
        list-style: none;
        display: inline;
      }
      .filter-links ul li {
        list-style: none;
        display: inline;
        margin-right: 1em;
      }
      .filter-links ul li a.filtering {
        font-weight: bold;
      }
      
      .embeddable tfoot th {
        text-align: right;
      }
      
      /** Media queries **/
      @media all and (max-width: 750px) {
      }
    </style>
  
    <h3>Top Contributions in 2012 Q1</h3>
    
    <div class="filter-links hide">
      <label>Filter:</label>
      <ul>
        <li><a class="filter-link" href="#obama">Barak Obama</a></li>
        <li><a class="filter-link" href="#romney">Mitt Romney</a></li>
        <li><a class="filter-link" href="#santorum">Rick Santorum</a></li>
        <li><a class="filter-link" href="#gingrich">Newt Gingrich</a></li>
        <li><a class="filter-link" href="#paul">Ron Paul</a></li>
        <li><a class="filter-link filter-clear" href="#clera">Show all</a></li>
      </ul>
    </div>
    
    <div class="table-container">
      <table id="q1-table">
        <tfoot><tr><th colspan="5"></th></tr></tfoot>
      </table>
    </div>
    
    <p class="footnote">Data from the <a href-"http://www.fec.gov/">Federal Election Commission</a>.</p>
  
    <script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/bubbletree-master-20120410/lib/jquery-1.5.2.min.js"><\/script>')</script>
    <script type="text/javascript" src="http://data.minnpost.s3.amazonaws.com/js/datatables-1.9.0/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
      Number.prototype.formatMoney = function(c, d, t) {
        var n = this, c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? "," : d, t = t == undefined ? "." : t, s = n < 0 ? "-" : "", i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", j = (j = i.length) > 3 ? j % 3 : 0;
        return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
      };
    
      // Extra sorting for data tables
      jQuery.fn.dataTableExt.oSort['formatted-num-asc'] = function(a,b) {
        /* Remove any formatting */
        var x = a.match(/\d/) ? a.replace( /[^\d\-\.]/g, "" ) : 0;
        var y = b.match(/\d/) ? b.replace( /[^\d\-\.]/g, "" ) : 0;
          
        /* Parse and return */
        return parseFloat(x) - parseFloat(y);
      };
      jQuery.fn.dataTableExt.oSort['formatted-num-desc'] = function(a,b) {
        var x = a.match(/\d/) ? a.replace( /[^\d\-\.]/g, "" ) : 0;
        var y = b.match(/\d/) ? b.replace( /[^\d\-\.]/g, "" ) : 0;
        return parseFloat(y) - parseFloat(x);
      };
      
      // Namespace jQuery
      (function($) {
        $(document).ready(function() {
        
          // Function to handle creating table, given data
          function createTable(data) {
            // Define table
            var Q1Table = $('#q1-table').dataTable({
              'aaData': data,
              'aoColumns': [
                { 'sTitle': 'Name', 'mDataProp': 'name' },
                { 'sTitle': 'Amount', 'mDataProp': 'sum_amount','sType': 'formatted-num' },
                { 'sTitle': 'Candidate', 'mDataProp': 'candidate_name' },
                { 'sTitle': 'Transactions', 'mDataProp': 'transactions' },
                { 'sTitle': 'Type', 'mDataProp': 'EntityType' }
              ],
              'aaSorting': [[ 1, 'desc' ]],
              'iDisplayLength': 25,
              'aLengthMenu': [[10, 15, 25, -1], [10, 15, 25, 'All']],
              'fnFooterCallback': function(footerRow, aaData, iStart, iEnd, aiDisplay) {
                // Total amount 
                /*
                var totalAmount = 0;
                for (var i = 0; i < aaData.length; i++) {
                  totalAmount += aaData[i]['sum_amount'].replace( /[^\d\-\.]/g, '') * 1;
                }
                */
             
                // Amount showing
                var totalPage = 0;
                for (var i = iStart; i < iEnd; i++) {
                  totalPage += aaData[aiDisplay[i]]['sum_amount'].replace( /[^\d\-\.]/g, '') * 1;
                }
             
                // Display in footer
                $('#q1-table tfoot th').html('Total amount on this page: $' + 
                  totalPage.formatMoney(2, '.', ','));
              }
            }); 
          
            // Add filter links
            $('.filter-links').show();
            $('.filter-links a').click(function(e) {
              e.preventDefault();
              var $thisLink = $(this);
              
              if ($thisLink.hasClass('filter-clear')) {
                Q1Table.fnFilter('', 2);
              }
              else {
                Q1Table.fnFilter($thisLink.text(), 2);
              }
              
              $('.filter-links a').removeClass('filtering');
              $thisLink.addClass('filtering');
            });
          }
          
          // Use JSON request if data is not embedded.
          if (typeof q1Data == 'undefined') {
            $.getJSON('data/fec_q1_contributions_by_entity.json', function(requestData) {
              createTable(requestData);
            });
          }
          else {
            createTable(q1Data);
          }
        });
      })(jQuery);
    </script>
  </div>
  <!-- Embed End -->
  
  
</body>
</html>